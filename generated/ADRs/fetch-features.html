<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../../_static/favicon_16x16.png" sizes="16x11" rel="icon" type="image/png">
    <link href="../../_static/favicon_32x32.png" sizes="32x21" rel="icon" type="image/png">
    <title>ADR - Feature set of elos “fetch” DRAFT &#8212; elos  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Architecture Design Record - Event Storage Backend" href="event_storage_backends.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="adr-feature-set-of-elos-fetch-draft">
<h1>ADR - Feature set of elos “fetch” <strong>DRAFT</strong><a class="headerlink" href="#adr-feature-set-of-elos-fetch-draft" title="Link to this heading">¶</a></h1>
<section id="problem">
<h2>Problem<a class="headerlink" href="#problem" title="Link to this heading">¶</a></h2>
<p>The elos IPC protocol has a powerful feature called “fetch” to grab old
events from the storages. It can be used via elosc and argument “-f”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">elosc</span> <span class="o">-</span><span class="n">f</span> <span class="s2">&quot;1 1 EQ&quot;</span>
<span class="n">elosc</span> <span class="o">-</span><span class="n">f</span> <span class="s2">&quot;.event.source.appName &#39;sshd&#39; STRCMP .event.payload r&#39;Accept&#39; REGEX AND&quot;</span>
</pre></div>
</div>
<p>This is very handy if someone might have missed an important event that
happened in the past. This is also useful to readout old events from the
storages similar to reading a log-file.</p>
<p>(Hint: backend in the following always means storage-backends)</p>
</section>
<section id="influencing-factors">
<h2>Influencing factors<a class="headerlink" href="#influencing-factors" title="Link to this heading">¶</a></h2>
<p>The following constraints have to be taken into account for a suitable
solution:</p>
<ul class="simple">
<li><p>efforts of development</p></li>
<li><p>meaningful feature set</p></li>
<li><p>efficient execution time</p></li>
</ul>
</section>
<section id="assumption">
<h2>Assumption<a class="headerlink" href="#assumption" title="Link to this heading">¶</a></h2>
<p>When using the fetch backend the user expects to just get a set of
recent events that it might have missed. e.g.: If “A” waits for “sshd”
to start, but “sshd” was already started just milliseconds before “A”,
the fetch-feature is very handy to avoid waiting of “A” for an event
that has already occurred.</p>
<p>It is assumed that a full log-analysis like auditing etc. is done using
tools specifically designed for the storage. e.g. SQL querys are used to
analyse logs written to SQL databases.</p>
</section>
<section id="considered-alternatives">
<h2>Considered Alternatives<a class="headerlink" href="#considered-alternatives" title="Link to this heading">¶</a></h2>
<section id="option-full-featured-fetch">
<span id="id1"></span><h3>1) Option - full featured “fetch”<a class="headerlink" href="#option-full-featured-fetch" title="Link to this heading">¶</a></h3>
<p>fetch takes all storage backends (json, sql, nosql, …) into account
and collects events from there</p>
<p><em>pros</em></p>
<ul class="simple">
<li><p>the returned events are almost complete</p></li>
</ul>
<p><em>cons</em></p>
<ul class="simple">
<li><p>elos needs support read-data from the backends</p></li>
<li><p>elos needs to convert RPN to data-selection-fromat of backend (e.g.
RPN to SQL)</p></li>
<li><p>event duplication might occur if one event is stored in multiple
backends.</p></li>
<li><p>if events were stored to no backend at all, they will not show-up.</p></li>
</ul>
</section>
<section id="option-limited-fetch-only-on-selected-backend-e-g-json">
<span id="option-limited-fetch-only-on-selected-backend-eg-json"></span><h3>2) Option - limited “fetch” only on selected backend (e.g. JSON)<a class="headerlink" href="#option-limited-fetch-only-on-selected-backend-e-g-json" title="Link to this heading">¶</a></h3>
<p>During fetch elos just reads from selected backends and thus returns
only a subset of the events. In particular the subset of events that
were stored in the backend.</p>
<p>e.g.: Just the json based backends are queried and only the currently
used file and its predecessor are read-in.</p>
<p><em>pros</em></p>
<ul class="simple">
<li><p>no read support of all backends needed</p></li>
<li><p>with a well configured rotation all relevant events can be collected.</p></li>
</ul>
<p><em>cons</em></p>
<ul class="simple">
<li><p>elos returns incomplete events (only recent ones)</p></li>
<li><p>depending on file rotation the amount of events varies (e.g. if the
files were rotated very recently only the events from the predecessor
file are used, if the files are about to be rotated soon two full
files of events are used.)</p></li>
</ul>
</section>
<section id="option-fetch-only-from-in-memory-database">
<span id="id2"></span><h3>3) Option - “fetch” only from in-memory database<a class="headerlink" href="#option-fetch-only-from-in-memory-database" title="Link to this heading">¶</a></h3>
<p>An in-memory (RAM) database just stored some events in a
ringbuffer-style. Old events are discarded if new events arrive and the
ring is already full.</p>
<p>This in-memory buffer could be statically sized in Bytes (e.g store only
10MB of events) or dynamically (e.g. store last 10sec of events)</p>
<p>Option 2 is pretty similar to this, if the JSON file is stored in a
ram-disk.</p>
<p><em>pros</em></p>
<ul class="simple">
<li><p>no read support on any backend needed</p></li>
</ul>
<p><em>cons</em></p>
<ul class="simple">
<li><p>elos returns only events still in the in-memory database.</p></li>
<li><p>read of stored events needs to interface directly to storage. (e.g.
read from the SQL database)</p></li>
</ul>
</section>
<section id="option-no-fetch-at-all">
<span id="id3"></span><h3>4) Option - no “fetch” at all<a class="headerlink" href="#option-no-fetch-at-all" title="Link to this heading">¶</a></h3>
<p>elos only forwards events from the inputs. Old events are lost and gone.</p>
<p><em>pros</em></p>
<ul class="simple">
<li><p>reduces elos to its basics (KISS)</p></li>
</ul>
<p><em>cons</em></p>
<ul class="simple">
<li><p>the feature is already there and became very handy.</p></li>
</ul>
</section>
</section>
<section id="decision">
<h2>Decision<a class="headerlink" href="#decision" title="Link to this heading">¶</a></h2>
<p>(none yet)</p>
<section id="rationale">
<h3>Rationale<a class="headerlink" href="#rationale" title="Link to this heading">¶</a></h3>
</section>
<section id="open-points">
<h3>Open Points<a class="headerlink" href="#open-points" title="Link to this heading">¶</a></h3>
<p>if something was left open after this decision</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/elos_blue.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">elos</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../UserManual.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../demo.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">elos API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="adrs.html">Architecture Design Records</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="atomic_variables.html">Architecture Design Record - Atomic Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_logging_storage_concept.html">Architecture Design Record - Event Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_retention_policies.html">Architecture Design Record - Event Retention Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_storage_class.html">Architecture Design Record - Event Storage Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_throtteling.html">Architecture Design Record - Event Throtteling</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage_of_FORTIFY_SOURCE.html">Design Decisions - Enforce usage of _FORTIFY_SOURCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="handle_kernel_module_dependencies.html">Handle kernel module dependencies for Elos</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_registry.html">Evaluation of the gitlab package registry, with regards to storing and using the elos subproject debian packages.</a></li>
<li class="toctree-l2"><a class="reference internal" href="elos-coredump.html">Architecture Design Record - Detecting Coredumps</a></li>
<li class="toctree-l2"><a class="reference internal" href="elos_logging_frameworks.html">Architecture Design Record - Evaluation Of Logging Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_authorization.html">Architecture Design Record - Event publishing authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_authorization_blacklisting.html">Architecture Design Record - Blacklist filtering of published events</a></li>
<li class="toctree-l2"><a class="reference internal" href="elos_event_logging_concept.html">Architecture Design Record - elos event logging concept <strong>DRAFT</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="event_storage_backends.html">Architecture Design Record - Event Storage Backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_storage_backends.html#decision-1">Decision</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_storage_backends.html#decision-2">Decision</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_storage_backends.html#rational">Rational</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ADR - Feature set of elos “fetch” <strong>DRAFT</strong></a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="adrs.html">Architecture Design Records</a><ul>
      <li>Previous: <a href="event_storage_backends.html" title="previous chapter">Architecture Design Record - Event Storage Backend</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, wolfgang.gehrhardt@emlix.com.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/generated/ADRs/fetch-features.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>