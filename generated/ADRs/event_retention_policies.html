<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../../_static/favicon_16x16.png" sizes="16x11" rel="icon" type="image/png">
    <link href="../../_static/favicon_32x32.png" sizes="32x21" rel="icon" type="image/png">
    <title>Architecture Design Record - Event Retention Policy &#8212; elos  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Architecture Design Record - Event Storage Backend" href="event_storage_backends.html" />
    <link rel="prev" title="Architecture Design Record - Event Storage" href="event_logging_storage_concept.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="architecture-design-record-event-retention-policy">
<h1>Architecture Design Record - Event Retention Policy<a class="headerlink" href="#architecture-design-record-event-retention-policy" title="Permalink to this heading">¶</a></h1>
<section id="problem">
<h2>Problem<a class="headerlink" href="#problem" title="Permalink to this heading">¶</a></h2>
<p>In short: how to deal with events that become old.</p>
<p>A retention policy must describe :</p>
<ul class="simple">
<li><p>when to consider an event as old</p></li>
<li><p>what to do with old events</p></li>
<li><p>when to apply the retention policy</p></li>
<li><p>consists of multiple retention policies itself</p></li>
</ul>
</section>
<section id="influencing-factors">
<h2>Influencing factors<a class="headerlink" href="#influencing-factors" title="Permalink to this heading">¶</a></h2>
</section>
<section id="assumptions">
<h2>Assumptions<a class="headerlink" href="#assumptions" title="Permalink to this heading">¶</a></h2>
</section>
<section id="considered-alternatives">
<h2>Considered Alternatives<a class="headerlink" href="#considered-alternatives" title="Permalink to this heading">¶</a></h2>
</section>
<section id="event-aggregation-combine-repeating-events">
<span id="id1"></span><h2>1) event Aggregation - combine repeating events<a class="headerlink" href="#event-aggregation-combine-repeating-events" title="Permalink to this heading">¶</a></h2>
<p>Repeating events to a single new one “event type occurred n-times from
to”.</p>
<p><em>TBD: evaluation, measurements, PoC</em></p>
<p><em>pros</em></p>
<ul class="simple">
<li><p>restore storage capacity</p></li>
<li><p>less dependencies – only one storage technology involved</p></li>
</ul>
<p><em>cons</em></p>
<ul class="simple">
<li><p>additional writes after deletes</p>
<ul>
<li><p>But:</p></li>
</ul>
</li>
</ul>
</section>
<section id="event-aggregation-drop-fields">
<span id="id2"></span><h2>2) event Aggregation - drop fields<a class="headerlink" href="#event-aggregation-drop-fields" title="Permalink to this heading">¶</a></h2>
<p>After a certain amount of time it is not necessary to know exactly what
happened only that a specific event has occurred. This can be used to
save storage capacity and shrink events by deleting fields like payload
or other fields.</p>
<p><em>TBD: evaluation, measurements, PoC</em></p>
<p><em>pros</em></p>
<ul class="simple">
<li><p>restore storage capacity</p></li>
<li><p>for string</p>
<ul>
<li><p>But:</p></li>
</ul>
</li>
<li><p>less dependencies – only one storage technology involved</p></li>
</ul>
<p><em>cons</em></p>
<ul class="simple">
<li><p>loss of event details</p></li>
</ul>
</section>
<section id="event-aggregation-keep-recent-only-one">
<span id="id3"></span><h2>3) event Aggregation - keep recent only one<a class="headerlink" href="#event-aggregation-keep-recent-only-one" title="Permalink to this heading">¶</a></h2>
<p>Group events by comparing a set of attributes if they can be treated as
equal. If the case drop all but the most recent one. This can be applied
to all events where it is not necessary to count the occurrences and
only the event it self is important. This policy reduce redundant
information of multiple events.</p>
<p>i.e.: Device defect event occurs for 5 hours every 10 seconds only the
last event is important as it is still defect.</p>
<p><em>TBD: evaluation, measurements, PoC</em></p>
<p><em>pros</em></p>
<ul class="simple">
<li><p>restore storage capacity</p></li>
<li><p>simple to implement</p></li>
</ul>
<p><em>cons</em></p>
<ul class="simple">
<li><p>needs to search the storage for specific events</p></li>
<li><p>either lock the storage or accept to miss events meanwhile the
retention runs</p></li>
</ul>
</section>
<section id="event-deletion-depending-on-filter-rules">
<span id="id4"></span><h2>4) event deletion depending on filter rules<a class="headerlink" href="#event-deletion-depending-on-filter-rules" title="Permalink to this heading">¶</a></h2>
<p>the existing filter rules based on rpn is used to delete the matching
events.</p>
<p>e.g.
<code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">&quot;.event.time</span> <span class="pre">'654321'</span> <span class="pre">LT</span> <span class="pre">.event.payload</span> <span class="pre">'Hugo'</span> <span class="pre">STRCMP</span> <span class="pre">.event.messageCode</span> <span class="pre">43</span> <span class="pre">EQ</span> <span class="pre">AND</span> <span class="pre">AND&quot;</span></code>
This deletes all event with payload=”Hugo” and messageCode=43 occuring
before timecode “654321”.</p>
<p><em>pros</em></p>
<ul class="simple">
<li><p>reuse of existing concept</p></li>
</ul>
<p><em>cons</em></p>
<ul class="simple">
<li><p>“.event.time” needs to be added</p></li>
</ul>
</section>
<section id="decision">
<h2>Decision<a class="headerlink" href="#decision" title="Permalink to this heading">¶</a></h2>
<p>We select the following policies:</p>
<ul class="simple">
<li><p>…TBD…</p></li>
</ul>
<section id="rationale">
<h3>Rationale<a class="headerlink" href="#rationale" title="Permalink to this heading">¶</a></h3>
</section>
<section id="open-points">
<h3>Open Points<a class="headerlink" href="#open-points" title="Permalink to this heading">¶</a></h3>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/elos_blue.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">elos</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../UserManual.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../demo.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">elos API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="adrs.html">Architecture Design Records</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="atomic_variables.html">Architecture Design Record - Atomic Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="elos-coredump.html">Architecture Design Record - Detecting Coredumps</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_authorization.html">Architecture Design Record - Event publishing authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_authorization_blacklisting.html">Architecture Design Record - Blacklist filtering of published events</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_logging_storage_concept.html">Architecture Design Record - Event Storage</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Architecture Design Record - Event Retention Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_storage_backends.html">Architecture Design Record - Event Storage Backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_storage_backends.html#decision-1">Decision</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_storage_class.html">Architecture Design Record - Event Storage Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_throtteling.html">Architecture Design Record - Event Throtteling</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage_of_FORTIFY_SOURCE.html">Design Decisions - Enforce usage of _FORTIFY_SOURCE</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="adrs.html">Architecture Design Records</a><ul>
      <li>Previous: <a href="event_logging_storage_concept.html" title="previous chapter">Architecture Design Record - Event Storage</a></li>
      <li>Next: <a href="event_storage_backends.html" title="next chapter">Architecture Design Record - Event Storage Backend</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, wolfgang.gehrhardt@emlix.com.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/generated/ADRs/event_retention_policies.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>