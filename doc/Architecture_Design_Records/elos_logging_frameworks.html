<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../../_static/favicon_16x16.png" sizes="16x11" rel="icon" type="image/png">
    <link href="../../_static/favicon_32x32.png" sizes="32x21" rel="icon" type="image/png">
    <title>Architecture Design Record - Evaluation Of Logging Frameworks &#8212; elos  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Architecture Design Record - Event publishing authorization" href="event_authorization.html" />
    <link rel="prev" title="Architecture Design Record - elos event logging concept DRAFT" href="elos_event_logging_concept.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="architecture-design-record-evaluation-of-logging-frameworks">
<h1>Architecture Design Record - Evaluation Of Logging Frameworks<a class="headerlink" href="#architecture-design-record-evaluation-of-logging-frameworks" title="Link to this heading">¶</a></h1>
<section id="problem">
<h2>Problem<a class="headerlink" href="#problem" title="Link to this heading">¶</a></h2>
<p>Elos at present has a simple logging framework. The logging framework must be more robust and extensive.
This can be achieved using :</p>
<p>a) Taking an existing third party logging framework and extending it by adding a adapter for elos. This
adapter helps in achieving the goals given below. The API’s from these logging framework is directly
available for applications for publishing events via the aforementioned adapters.</p>
<p>b) Write an elos log API that acts as an wrapper over the logging API of a third party logging framework.
This elos log API is then exposed to the end user for logging purposes and fulfills the requirements
given below.</p>
</section>
<section id="goals">
<h2>Goals<a class="headerlink" href="#goals" title="Link to this heading">¶</a></h2>
<p>The current framework should be reworked upon or existing framework changed to another framework so
that the requirements given below are satisfied.</p>
<ol class="arabic simple">
<li><p>Expandable to publish elos events</p>
<ul class="simple">
<li><p>The logging frame shall provide a way to create elos events whenever a log is created, with the
log message as the payload. The event should be generated when an application uses the elos API
as well as by elos within itself.</p></li>
</ul>
</li>
<li><p>Support for fallback strategy</p>
<ul class="simple">
<li><p>When an event creation fails due to various reasons, then an fallback strategy is provided. For e.g.
log message diverted to stderr when event creation fails.</p></li>
</ul>
</li>
<li><p>Thread safety</p>
<ul class="simple">
<li><p>The logging framework should be thread safe.</p></li>
</ul>
</li>
<li><p>Supports contextual logging</p>
<ul class="simple">
<li><p>Contextual logging is logging the same log message under different log level based upon context in which
it is logged. E.g. Failure to open a file to write a log is not as critical as failure to open a file
to read out elos configuration which is critical. Although both failure logs are same the logging level is
different. The logging level is then detemined using the the log context level.</p></li>
</ul>
</li>
</ol>
<p>In case it is determined that a third party logging framework is needed then the following additional requirements
are needed</p>
<ol class="arabic simple" start="5">
<li><p>Plain C interface</p>
<ul class="simple">
<li><p>Its is written in plain C</p></li>
</ul>
</li>
<li><p>License</p>
<ul class="simple">
<li><p>Logging frame work should be open-source with corresponding open-source license like [L]GPL/BSD/MIT</p></li>
</ul>
</li>
<li><p>Maturity Grade</p>
<ul class="simple">
<li><p>The framework is well maintained and regularly updated with bug fixes.</p></li>
</ul>
</li>
<li><p>Performance</p>
<ul class="simple">
<li><p>Is not too big or too complex to integrate into the existing code base, and is fast to build and execute.</p></li>
</ul>
</li>
<li><p>Configuration</p>
<ul class="simple">
<li><p>Easily customizable to suit our requirements with the help of configurations. The configuration can be
either be file or be done programtically.</p></li>
</ul>
</li>
</ol>
</section>
<section id="solution">
<h2>Solution<a class="headerlink" href="#solution" title="Link to this heading">¶</a></h2>
<p>The following logging frameworks were analyzed to check if they fulfill the requirements stated above</p>
<ul class="simple">
<li><p>safu log</p>
<ul>
<li><p>The safu log is a logging library developed as part of elos safe utilities. Elosd application and API’s
use this library for logging. It is thread safe and written in C. It is configurable within the scope
of elos.</p></li>
</ul>
</li>
<li><p>log4c</p>
<ul>
<li><p>Log4c is a library of C for flexible logging to files, syslog and other destinations. It is modeled after
the Log for Java library (http://jakarta.apache.org/log4j/), staying as close to their API as is reasonable.</p></li>
</ul>
</li>
<li><p>slog</p>
<ul>
<li><p>SLog is cross platform and thread safe logging library for C/C++ with possibilities to easily control verbosity
levels, tag and colorize output, log to file, on the fly change configuration parameters, optional log callback
for log collection and many more. More information can be found here (https://github.com/kala13x/slogx)</p></li>
</ul>
</li>
<li><p>zlog</p>
<ul>
<li><p>zlog is a reliable, high-performance, thread safe, flexible, clear-model, pure C logging library. More information
can be found in (http://hardysimpson.github.io/zlog)</p></li>
</ul>
</li>
<li><p>zf_log</p>
<ul>
<li><p>zf_log is a core logging library for C, Objective-C and C++. Following the Unix way, this library provides the
logging core which can be used directly or extended. In essence, it’s a thin wrapper around snprintf() function. By
implementing less than 20% of functionality found in more sophisticated and feature reach libraries, it covers more
than 80% of common use cases. Found to be particularly useful in cross-platform applications and on mobile/embedded
platforms. Focus is made on simplicity, ease of use and performance (to be more precise - low overhead). More information
can be found in (https://github.com/wonder-mice/zf_log)</p></li>
</ul>
</li>
</ul>
<p>The results of the analysis are given in the table below:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Requirements</p></th>
<th class="head text-center"><p>safu log</p></th>
<th class="head text-center"><p>log4c</p></th>
<th class="head text-center"><p>slog</p></th>
<th class="head text-center"><p>zlog</p></th>
<th class="head text-center"><p>zf_log</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>Expandable to publish elos events</p></td>
<td class="text-center"><p>No</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Support for fallback strategy</p></td>
<td class="text-center"><p>No</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Thread safety</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>No</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Plain C interface</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
<td class="text-center"><p>Yes</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Supports contextual logging</p></td>
<td class="text-center"><p>No</p></td>
<td class="text-center"><p>*No</p></td>
<td class="text-center"><p>*No</p></td>
<td class="text-center"><p>*No</p></td>
<td class="text-center"><p>*No</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>License Type</p></td>
<td class="text-center"><p>MIT</p></td>
<td class="text-center"><p>LGPLv2</p></td>
<td class="text-center"><p>MIT</p></td>
<td class="text-center"><p>LGPLv2.1</p></td>
<td class="text-center"><p>MIT</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Maturity Grade (Code last updated)</p></td>
<td class="text-center"><p>Regular</p></td>
<td class="text-center"><p>01.2016</p></td>
<td class="text-center"><p>05.2023</p></td>
<td class="text-center"><p>07.2023</p></td>
<td class="text-center"><p>03.2021</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Performance</p></td>
<td class="text-center"><p>NA</p></td>
<td class="text-center"><p>NA</p></td>
<td class="text-center"><p>NA</p></td>
<td class="text-center"><p>NA</p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/wonder-mice/zf_log#comparison">Performance</a></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Configuration</p></td>
<td class="text-center"><p>NA</p></td>
<td class="text-center"><p>configured</p></td>
<td class="text-center"><p>configured</p></td>
<td class="text-center"><p>configured during init</p></td>
<td class="text-center"><p>no config file required, configuration is done ad-hoc</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-center"><p></p></td>
<td class="text-center"><p>during init</p></td>
<td class="text-center"><p>dynamically</p></td>
<td class="text-center"><p>with config file but</p></td>
<td class="text-center"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p></p></td>
<td class="text-center"><p></p></td>
<td class="text-center"><p>with config</p></td>
<td class="text-center"><p>no config</p></td>
<td class="text-center"><p>can be re-configured</p></td>
<td class="text-center"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-center"><p></p></td>
<td class="text-center"><p>file</p></td>
<td class="text-center"><p>file reqd.</p></td>
<td class="text-center"><p>dynamically</p></td>
<td class="text-center"><p></p></td>
</tr>
</tbody>
</table>
<p>* : can be implemented by user</p>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h2>
<p>a) In all the logging frameworks analyzed, it is possible to add an adapter using the provided callback function.</p>
<p>b) All frameworks have similar API functions which can be wrapped in an elos API function.</p>
</section>
<section id="decision">
<h2>Decision<a class="headerlink" href="#decision" title="Link to this heading">¶</a></h2>
<p>a) In all analyzed logging frameworks, it is possible to add an adapter for elos. This can be achieved via a call back function
provided in their respective API’s while logging. In this method however new api function from the logging library needs to be
incorporated in the code which leads to much refactoring since logging is used extensively in elos source. So this solution
will be avoided.</p>
<p>b) We will write a elos logging library. The API’s from this library will act as a wrapper function for a selected third party
logging framework. In this way we ensure that logging functions can remain as close to existing logging function as possible
in the elos source. Moreover with the wrapper function we can modularize output logging, meaning we can design the elos log API
in such a way that it can support any logging framework fulfills the above criteria and has the required function that can be
mapped to the elos API wrapper. In this method the  requirement event generation is then compartmentalized inside elos log api
which makes event publishing more secure.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/elos_blue.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">elos</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../userManual.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/demos/index.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/Debug/doc/source_generated/api/index.html">public API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/Debug/doc/source_generated/developer/api/index.html">Complete API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ADRs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#list-of-adrs">List of ADRs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">How we document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../test/index.html">Verification Strategy or how we test</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Architecture Design Records</a><ul>
      <li>Previous: <a href="elos_event_logging_concept.html" title="previous chapter">Architecture Design Record - elos event logging concept <strong>DRAFT</strong></a></li>
      <li>Next: <a href="event_authorization.html" title="next chapter">Architecture Design Record - Event publishing authorization</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, wolfgang.gehrhardt@emlix.com.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/doc/Architecture_Design_Records/elos_logging_frameworks.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>