<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../../_static/favicon_16x16.png" sizes="16x11" rel="icon" type="image/png">
    <link href="../../_static/favicon_32x32.png" sizes="32x21" rel="icon" type="image/png">
    <title>libelosplugin &#8212; elos  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Plugins" href="../plugins/index.html" />
    <link rel="prev" title="libelos" href="../libelos/index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="libelosplugin">
<h1>libelosplugin<a class="headerlink" href="#libelosplugin" title="Link to this heading">¶</a></h1>
<section id="intro">
<h2>Intro<a class="headerlink" href="#intro" title="Link to this heading">¶</a></h2>
<p>The libelosplugin contains everything needed for creating a new elos plugin.
Each plugin can be one of the three following types mentioned below.</p>
<section id="scanner">
<h3>Scanner<a class="headerlink" href="#scanner" title="Link to this heading">¶</a></h3>
<p>The scanners main purpose is to watch certain system resources (e.g. free space
on hard drives, temperatures, e.t.c.) and generate Events if certain
conditions are met.</p>
</section>
<section id="storagebackend">
<h3>StorageBackend<a class="headerlink" href="#storagebackend" title="Link to this heading">¶</a></h3>
<p>The StorageBackends acts as an interface between a form of persistent storage
(e.g. a json file, sql database, e.t.c.) and elos itself. It takes Events
and writes them into the storage solution it is based upon.</p>
</section>
<section id="clientconnection">
<h3>ClientConnection<a class="headerlink" href="#clientconnection" title="Link to this heading">¶</a></h3>
<p>The ClientConnection acts as an interface between elos and everything that
wants Events from elos, e.g. by subscribing to certain Events with an
EventFilter selector.</p>
</section>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<p>To create a plugin a shared object needs to be created that links to
libelosplugin, it also needs a configuration struct present in one of
the source files that defines the type of the plugin as well as the
functions to use. This struct is of the type elosPluginConfig_t and should
be defined at the bottom of the file since it makes referencing functions
easier. The name of the struct must always be “elosPluginConfig” to make
it possible for the elosPluginControl to find the structure. The functions
can (and perhaps should) be marked as static, as symbol table lookups are
slightly faster with fewer entries present.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">elosPluginConfig_t</span> <span class="n">const</span> <span class="n">elosPluginConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">PLUGIN_TYPE_SCANNER</span><span class="p">,</span>
    <span class="o">.</span><span class="n">load</span> <span class="o">=</span> <span class="n">_loadFunction</span><span class="p">,</span>
    <span class="o">.</span><span class="n">unload</span> <span class="o">=</span> <span class="n">_unloadFunction</span><span class="p">,</span>
    <span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">_startFunction</span><span class="p">,</span>
    <span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">_stopFunction</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The Load functions allocates memory and initializes the plugin, while Unload
does the opposite and frees the data associated with it. The Start and Stop
functions are responsible for fully activating the Plugin, with Start for
example containing an endless loop that monitors a resource, while Stop
contains the functionality to end the loop running in Start.</p>
<p>All used functions are of the type <code class="code docutils literal notranslate"><span class="pre">safuResultE_t</span> <span class="pre">func(elosPluginContext_t</span> <span class="pre">*)</span></code>,
with the elosPluginContext_t containing everything needed to operate the plugin.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/elos_blue.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">elos</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../doc/userManual.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demos/index.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/Debug/doc/source_generated/api/index.html">public API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../clients/index.html">elos-clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common/index.html">common</a></li>
<li class="toctree-l2"><a class="reference internal" href="../components/index.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../demos/index.html">Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../elosd/index.html">elosd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libelos/index.html">libelos</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">libelosplugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version/index.html">Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#intro">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#the-input-and-output-data-formats">The input and output data formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#components">Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../build/Debug/doc/source_generated/developer/api/index.html">Complete API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/Architecture_Design_Records/index.html">ADRs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/index.html">How we document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../test/index.html">Verification Strategy or how we test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../.github/index.html">GitHub CI</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Elos Source</a><ul>
      <li>Previous: <a href="../libelos/index.html" title="previous chapter">libelos</a></li>
      <li>Next: <a href="../plugins/index.html" title="next chapter">Plugins</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, wolfgang.gehrhardt@emlix.com.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/src/libelosplugin/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>