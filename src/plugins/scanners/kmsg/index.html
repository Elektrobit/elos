<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../../../../_static/favicon_16x16.png" sizes="16x11" rel="icon" type="image/png">
    <link href="../../../../_static/favicon_32x32.png" sizes="32x21" rel="icon" type="image/png">
    <title>Kmsg - Scanner &#8212; elos  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
    <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../_static/copybutton.js?v=f281be69"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Syslog – Scanner" href="../syslog/index.html" />
    <link rel="prev" title="Scanner" href="../index.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="kmsg-scanner">
<h1>Kmsg - Scanner<a class="headerlink" href="#kmsg-scanner" title="Link to this heading">¶</a></h1>
<p>Reads the kernel log ring buffer from /dev/kmsg and publishes depending
on pattern matching ([WIP] currently each line) as a “KMSG” event. The
scanner tries to open the configured file for reading, if it is not
found at the specified location it will try to create a FIFO node using
<code class="docutils literal notranslate"><span class="pre">mkfifo()</span></code>. Multiline kernel messages are not handled right now.</p>
<section id="published-events">
<h2>Published events<a class="headerlink" href="#published-events" title="Link to this heading">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">KMSG</span></code> –&gt; each line read from /dev/kmsg is published as it is in
the event payload field. But also parsed to set severity,
classification and date of the published event. All events generated
by the kmsg scanner have the message code 1111 “kernel log message”.
If the message could not be parsed for some reason severity and
classification will stay empty and the message code is set to 3422
“message not understood”.</p>
<ul class="simple">
<li><p>format is:</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1684239716</span><span class="p">,</span><span class="w"> </span><span class="mi">1668901000</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;fileName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\/dev\/kmsg&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;severity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;classification&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;messageCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1111</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3,215,264071662,-;squashfs: Unknown parameter &#39;tmpfs&#39;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<section id="compile-time">
<h3>Compile time:<a class="headerlink" href="#compile-time" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ELOSD_KMSG_FILE</span></code> –&gt; the path where to open expect a character
device or FIFO file node, default is <code class="docutils literal notranslate"><span class="pre">/dev/kmsg</span></code></p></li>
</ul>
</section>
<section id="environment">
<h3>Environment:<a class="headerlink" href="#environment" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ELOS_KMSG_FILE</span></code> –&gt; the path where to open expect a character
device or FIFO file node, default is <code class="docutils literal notranslate"><span class="pre">ELOSD_SYSLOG_PATH</span></code></p></li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/elos_blue.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../../index.html">elos</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../doc/userManual.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../demos/index.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/Debug/doc/source_generated/api/index.html">public API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Developers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../clients/index.html">elos-clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../common/index.html">common</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../components/index.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../demos/index.html">Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../elosd/index.html">elosd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../libelos/index.html">libelos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../libelosplugin/index.html">libelosplugin</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../version/index.html">Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#intro">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#the-input-and-output-data-formats">The input and output data formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#components">Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/Debug/doc/source_generated/developer/api/index.html">Complete API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doc/Architecture_Design_Records/index.html">ADRs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doc/index.html">How we document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../test/index.html">Verification Strategy or how we test</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Elos Source</a><ul>
  <li><a href="../../index.html">Plugins</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Scanner</a></li>
      <li>Next: <a href="../syslog/index.html" title="next chapter">Syslog – Scanner</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, wolfgang.gehrhardt@emlix.com.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../../../_sources/src/plugins/scanners/kmsg/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>